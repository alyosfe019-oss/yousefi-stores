<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الكتالوج الكامل - مخازن اليوسفي للأدوية</title>
    <style>
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            padding-bottom: 60px;
        }
        .header {
            background: linear-gradient(135deg, #1a365d, #2d3748);
            color: white;
            padding: 15px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        select, input {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 16px;
            background: white;
        }
        select { flex: 1; }
        input { flex: 2; }
        .btn-wa {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            float: left;
            box-shadow: 0 2px 8px rgba(37, 211, 102, 0.3);
        }
        .container {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .company-section {
            background: white;
            margin-bottom: 25px;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
            transition: transform 0.2s ease;
        }
        .company-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
        }
        .company-title {
            color: #d97706;
            font-size: 1.3em;
            font-weight: bold;
            border-bottom: 3px solid #fbbf24;
            padding-bottom: 12px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .count-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 15px;
        }
        .item-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }
        .item-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
            transform: translateY(-2px);
        }
        .item-info { 
            display: flex; 
            align-items: center; 
            flex: 1; 
        }
        .dot {
            height: 10px;
            width: 10px;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 50%;
            margin-left: 12px;
            display: inline-block;
        }
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .qty-btn {
            background: linear-gradient(135deg, #1a365d, #2d3748);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        .qty-btn:hover {
            transform: scale(1.1);
        }
        .qty-input {
            width: 50px;
            text-align: center;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            padding: 5px;
            font-weight: bold;
        }
        .add-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        .add-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        .notes-section {
            background: linear-gradient(135deg, #fff, #fef3c7);
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            border: 3px solid #f59e0b;
        }
        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .notes-title {
            color: #d97706;
            font-size: 1.4em;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .notes-actions {
            display: flex;
            gap: 12px;
        }
        .action-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .send-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        .clear-btn {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
        }
        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }
        .notes-list {
            max-height: 400px;
            overflow-y: auto;
            border: 2px solid #fbbf24;
            border-radius: 10px;
            padding: 15px;
            background: white;
        }
        .note-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 2px solid #fef3c7;
            background: #f8fafc;
            border-radius: 8px;
            margin-bottom: 8px;
        }
        .note-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .note-info {
            flex: 1;
        }
        .note-product {
            font-weight: bold;
            color: #1a365d;
            font-size: 15px;
        }
        .note-company {
            font-size: 13px;
            color: #6b7280;
        }
        .note-qty {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .delete-btn {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        .delete-btn:hover {
            transform: scale(1.1);
        }
        .footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: linear-gradient(135deg, #1a365d, #2d3748);
            color: white;
            text-align: center;
            padding: 12px;
            font-size: 13px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        .stats {
            background: linear-gradient(135deg, #dbeafe, #93c5fd);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid #3b82f6;
        }
        .sales-contacts {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            text-align: center;
            border: 3px solid #0ea5e9;
        }
        .contacts-title {
            margin: 0 0 20px 0;
            color: #1a365d;
            font-size: 1.5em;
            font-weight: bold;
        }
        .contacts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .contact-card {
            background: linear-gradient(135deg, #fff, #f8fafc);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        .contact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-color: #3b82f6;
        }
        .contact-name {
            font-weight: bold;
            margin-bottom: 8px;
            color: #1a365d;
            font-size: 1.2em;
        }
        .contact-phone {
            color: #059669;
            font-weight: bold;
            margin: 12px 0;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <div class="header">
        <div style="overflow: hidden;">
            <span style="font-size: 1.3em; font-weight: bold;">مخازن اليوسفي للأدوية - الكتالوج الكامل (500+ صنف)</span>
            <button onclick="copyToWhatsapp()" class="btn-wa">نسخ الكتالوج</button>
        </div>
        <div class="controls">
            <select id="companyFilter" onchange="renderItems()">
                <option value="All">جميع الشركات (60+ شركة)</option>
            </select>
            <input type="text" id="searchInput" onkeyup="renderItems()" placeholder="ابحث في 500+ صنف دوائي...">
        </div>
    </div>

    <div class="container">
        <div class="stats" id="statsInfo">
            جاري تحميل الاحصائيات...
        </div>

        <div class="notes-section">
            <div class="notes-header">
                <div class="notes-title">مذكرة الطلبات</div>
                <div class="notes-actions">
                    <button class="action-btn send-btn" onclick="sendOrder()">ارسال الطلبية</button>
                    <button class="action-btn clear-btn" onclick="clearNotes()">مسح الكل</button>
                </div>
            </div>
            <div class="notes-list" id="notesList"></div>
            <div style="margin-top: 15px; text-align: left; font-weight: bold; color: #1a365d;">
                الاجمالي: <span id="totalItems" style="color: #d97706; font-size: 1.2em;">0</span> صنف
            </div>
        </div>

        <div class="sales-contacts">
            <h3 class="contacts-title">ارقام مبيعات مخازن اليوسفي</h3>
            <div class="contacts-grid">
                <div class="contact-card">
                    <div class="contact-name">جاود اليوسفي</div>
                    <div class="contact-phone">779098883</div>
                    <a href="https://wa.me/967779098883" style="background: #25D366; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; display: inline-block; font-weight: bold;" target="_blank">
                        واتساب
                    </a>
                </div>
                <div class="contact-card">
                    <div class="contact-name">شاكر اليوسفي</div>
                    <div class="contact-phone">772398762</div>
                    <a href="https://wa.me/967772398762" style="background: #25D366; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; display: inline-block; font-weight: bold;" target="_blank">
                        واتساب
                    </a>
                </div>
                <div class="contact-card">
                    <div class="contact-name">حاتم اليوسفي</div>
                    <div class="contact-phone">770905915</div>
                    <a href="https://wa.me/967770905915" style="background: #25D366; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; display: inline-block; font-weight: bold;" target="_blank">
                        واتساب
                    </a>
                </div>
            </div>
        </div>

        <div id="productsContainer"></div>
    </div>

    <div class="footer">
        <strong>الكتالوج الكامل:</strong>
        <span id="totalCount" style="color: #fbbf24; font-weight: bold;">500+</span> صنف |
        <span id="currentDate"></span>
    </div>

    <script>
        // === قاعدة البيانات الكاملة ===
        const db = {
            "ابن حيان والمحضار": ["ميثوكوبال المحضار امبول", "ميثوكوبال اقراص المحضار"],
            "ارض الجنتين-الاروبيه": ["جلوكوفاج 1000 مجم اقراص", "ايثروكس 100 مكرو جرام", "نوربيون امبول الالماني", "جلوكوفاج 1000 ملجم XR", "جلوكوفانس 1000/5مجم", "جلوكوفانس 2.5/500", "جلوكوفاج 750مجم XR", "كونكور 5مجم اقراص", "كونكور 2.5 مجم", "جلوكوفانس 500/5"],
            "استراميدكا": ["مطارش 10 سي سي"],
            "الافاق": ["بانالايف 120 مجم شراب 100 مل", "ايبولايف 100مجم شراب 110مل", "بانالايف 250 مجم شراب"],
            "البلسم": ["ستال بار (بارسيتمول قرب)", "بانستال (بانتوبرازول فيال 40)"],
            "الجبل": ["كوجنيام شراب (منتات)", "اتش بي هيلثاب (هيليكور)", "فالبوتيك 100 مل شراب", "هيم اب شراب", "اورتاكسيم 500 (سيفوتاكسيم)", "باراجون شراب 250", "اورتاكسيم 1000"],
            "الجزيرة والخليج": ["جافسكون ايه اي ادفانس اكياس", "جافسكون 200 مل شراب", "لاكالوت (جميع الانواع)", "دولفين تحاميل", "جليماديل", "دايلامك", "سيكودال", "روفاك", "ديكاديل", "نافوبروكسين", "جريزوفين", "بونجلا", "جابتين"],
            "الجلال": ["بارافيوسيف 1 جم قرب"],
            "الحارث": ["بريديلون 5 ملجم", "ليبراكس 2.5/5 مجم", "كادوميت 250", "جوجل اورال جل", "انسولين اتش مكس 100", "بروكسيمول اقراص", "اوميجا 3 بلس", "ترياكتين اقراص", "مستينون", "اومنسيف", "ستلاسيل", "ديكلوماكس", "تريبتولين", "فيتامين سي فوار", "كولميديتين", "ك فيتون", "يوني لكتون", "بريزولين", "هيبارين", "ديوسيد", "كارديكسين", "توسيلار", "فلوب", "سلفازين"],
            "الحديثه الطبيه": ["فيتامين بي كومبلكس امبول", "ليدوكاين", "كلورفينرامين", "برستامول", "دكساميثازون", "ناكسا ماب", "اسكاي سنون"],
            "الحكمه": ["كنزار اتش 100/25", "كبراديل شراب", "توبيزول كريم مهبلي", "تافاسين 500", "بيستول 5", "توسكان شراب", "كنزار 50", "1 2 3 شراب", "كنزار اتش 50/12.5", "زيثروكان 500 كبسول", "1 2 3 اقراص", "زيثروكان شراب", "توب فور كريم"],
            "الخالد": ["انجيوزايد اقراص"],
            "الخليج": ["دولفين 25 تحاميل", "دولفين 12.5 تحاميل"],
            "الدهبلي": ["لوباميد كبسول", "فارستولاكس اقراص", "لنكو بل فيال 600", "بلتاكسون 1 جرام", "ميثر بل امبول", "ديكلوبل", "ايميسون", "دي 3 بل", "ابي ثير نوكس"],
            "الدواء ميديكال": ["ميكي اتش شراب", "درموجين كريم", "اولفنت (اسكوريل)"],
            "الدوليه": ["موكونيل شراب", "ميوكونيل قطر", "دولفين بروفينال شراب", "سيناركس اقراص", "فلونيل اس ار", "كلافيموكس قطر"],
            "الرام": ["اميرام 25", "اكيسول 2", "تريانيل 25"],
            "الرشيد": ["جلوكوزامين مركب", "كارنيفيتا فورت", "جلوكوزامين صافي", "ميلجا اقراص", "موف مساج كريم", "فاست شراب", "ميلوباك 10", "رينال اس فوار", "ميني جوافه قطر", "نايس بيبي مرهم", "جوافه شراب"],
            "الرمال": ["ازينات 250 شراب", "ازينات 125 شراب"],
            "السعاده": ["الكتون 25", "ليدوجل 2%"],
            "العابد": ["نيبكور 5", "راميكور 2.5", "لنكوسيل 500", "اورالوكس 100 شراب", "الفاكورت فيال", "ديبروز الفا امبول", "ازمكس شراب", "روسيفلكس 1جم"],
            "العابد سكوت": ["ديبوكس كرونو 500", "ايتو 90", "بانتوسكوت 40", "بيسكوت 5", "ليريكوبال", "ليفوكاست", "اولابنز 10", "دانزوفين", "سكولجين", "سكوترون بلاس", "فلوسكوت", "سكوفاست"],
            "العابد فارما": ["انتريكور 50", "امبرور 10", "سيركال", "بان بلاس 40", "زيروكس 200 شراب", "دايزن 10", "فيتافين", "ابيدوفين", "اكس فور ديب", "اي بوست 400", "بايو دالتين", "بروسبيكس", "تريبلكس ب", "تن بلاس", "ثايموكان", "جانيو اكسترا", "جلوستوب", "دي فيت", "سوبر فيت سي", "سي بلاس", "سيردون", "فاستوب", "فيلدا بلاس", "فيلداتيك", "كارفينا", "كان بي", "كوبا فاست", "لوكسيم", "ليجنوكايين", "ماجمين", "ادبريل اتش", "اديزار اتش", "اديفاس", "اديكوبال", "الفاجليب", "بلافيكور", "بنتا", "تورليكس", "زيدكس", "فيتكا", "فيرفوليك ز", "فيكسورال", "كارديزيدن", "كلافوراما", "لنكوسيل"],
            "العافيه": ["فازوليب 20", "بروتام 0.4", "زيكوف شراب", "اميكارديا 5", "دكسافين فيال", "رينو اقراص"],
            "العافيه اربي": ["رفامكس 125 شراب", "روفكس كبسول 200", "امبي سي شراب", "زادرو 500 كبسول", "زادرو شراب", "رفاموكس شراب 250", "روفكس كبسول 400", "روفكس 30مل شراب"],
            "العربيه": ["توسفين شراب اخضر", "توسفين شراب احمر", "نيورفيت امبول", "ديكال ب12 شراب", "نيورفيت اقراص", "كولونا اقراص"],
            "الغزالي": ["جليمبرايد 2", "متفورمين 850", "جليمبرايد 3", "دكلودنك ريتارد", "اسودنك", "متفورمين 500", "اينا اتش سي تي", "دنك اير", "لوساردنك", "بارادنك", "سيمفادنك", "توراس دنك", "ايبوبروفين", "بانتو دنك", "دكلودنك", "سيبرو دنك", "كار فيدي", "دوكس دنك"],
            "الفاء": ["كلاجون فوار"],
            "الفتح": ["كولوماك", "فيتامين A 24ك", "سيمثكون قطر", "جلسرين كبار", "سيدوبروكت تحاميل", "في تو بلاس", "يورينكس", "بنزابين 1.2", "سبازموديجستين", "جينوزول 400", "ديكلوفين فاست فوار", "فاجيل بودره", "ميكوناز اورال جل", "موبيتيل 15", "فوار فروت", "يوريكول فوار", "فاركوزول", "ايزوماك", "بروتوزول", "اوتوكالم", "ميكوناز كريم", "ميدازول", "ديابين", "مونوماك", "فاركوبريل", "لاكسين", "سوبرانيل", "بريدنيزولون", "فيت سي", "فيدروب", "ديبوفورت", "هاي كال", "بيبي فيت", "ابيفورتيل", "ديرماتين", "ديسبركام", "فاركونسيل", "ريلاكس", "ديكلوفين", "بروستاكيور", "بليكول"],
            "الفرقان": ["اسيا دي 50000", "بيزوكور 2.5", "تولين اكسترا", "بيزوكور 5", "اس اوميبرال", "اسيا بركس", "اسيا كورت", "اكتازون", "اكس فور", "بلوفكسين", "تامنيستيت", "توكسيل", "ثريزيم", "جانو اسيا", "جيستال", "دانزوليت", "دايزوليسين", "ديسينوليت", "فيتانيورين", "فيروتريت", "كانديزار", "كلوميدين", "كومريت", "مونتالرج", "نورتيفال", "نيبيام", "ديفوس"],
            "القاهره": ["يوريفين فوار", "انتينال شراب", "ابيدون شراب", "بيتافوس", "الفينترن", "ستيميولان", "اوراكيور", "الفاكيموتربسين", "الفيلا"],
            "المدينه الطبيه": ["برجناكير", "زيديكال اقراص", "فيروجلوبين", "بيرفكتيل", "استوكير", "اوفاكير", "اولجيوكير", "فيزوناس", "الترا بي", "ديابتون", "فيجونايس", "كوليكايد", "ميم ملتي", "ميم كبسول", "ليفرال"],
            "المفضل بيلم": ["اتروز 40", "اتروز 20", "كلاموكس 625", "سبازموتك بلس", "فيرلوس ابر شرب", "كيتورال شامبو", "فينتوبيم بلاس", "كورنيس 6.25", "كيتورال كريم", "كلاموكس 156", "كلاموكس 457", "كلاموكس 228 شراب", "كلاموكس 312", "فورسيف 1 جم", "كلاموكس 1جم"],
            "المفضل فارما": ["بيلكس اقراص", "سبيمان", "ليف 52 اقراص", "سبتلين اقراص", "منتات شراب", "بيلكس مرهم", "ليف 52 شراب", "سبتلين شراب", "سيستون", "كوفليت اتش", "بونيسان شراب"],
            "النهدي": ["بولسيت 40", "اميفيناك دي تي 50"],
            "الهادي": ["بروبيتون اكياس"],
            "الورافي": ["ديفارول امبول", "توسيفان شراب", "رينكس اطفال", "فينتال بخاخ", "رينكس كبار", "ديكساميتازون اقراص"],
            "الوطنيه": ["تتراسكلين مرهم عين", "فورسيمايد امبول", "كانيولا 24", "بانتو بريم", "ترامادول امبول", "فيتامين سي امبول", "سلبتمول بخاخ", "فيتامين بي6 امبول", "ايماريم امبول", "برايم كلايف 1.2", "اريثرومايسين مرهم", "فلودين قطر", "دكس ان قطر", "بارستامول انفيوشن", "ديفا ميثر", "ريموفيناك", "نيربوتايد", "دكساميثازون", "كلورفينيرامين", "ليدوكاين", "بوتاسيوم", "كالسيوم", "جنتاميسين", "ادرنالين", "تيتانوس", "والكائين", "ديكلوفيناك"],
            "اليمنيه المصريه": ["هاي كاند بلاس", "هاي كاند 16", "اومنيسين 0.4", "هاي كاند 8", "رينوف اطفال احمر", "اميفيناك", "اسيتام", "الرتادين", "امبا جارد", "امبروفين", "اوسكال", "بسكوسين", "بيسوبرول", "جانوكير", "جليماريل", "دايجارد", "دايفانس", "دروتاب", "رينوف", "زئير", "سبترام", "كيدي كير", "لوتنسين", "لوفر", "ميكام", "ميلور"],
            "بلقيس": ["تامسول 0.4", "ليندينيت 30", "حلا اقراص", "نوركلوت", "ريجالون", "ليندينيت 20", "فيوسيبت", "ميدوكالم", "كافنتون", "بوستينور", "تامزومان", "ايلومت", "ماكسي فيتا", "بيلارا", "ليزنورم", "بروستا تاب", "سي اتش الفا", "لاموليب", "اكتيفو", "بروموكربتين", "لاجاز", "اكواكس", "تراي ريجول", "ريجفيدون", "كليون دي"],
            "تبيكال": ["فيتامين E 400", "ترافوكسيم", "ترافينات", "سوسبان", "بانتو تي في بي", "همبوليمين", "نيرو ثري بي", "ترافيكول"],
            "جلفار": ["باندرم كريم", "ادول تحاميل 250", "جوبيزون 5", "ميبو كريم", "ادول تحاميل 125", "بروفينال شراب", "ادول شراب", "ادول قطر"],
            "حضرموت الوادي": ["سي واي (سيتوتك)", "اسيكلودي", "نوازما بلس", "روفاس 3 مليون", "فوجيما بلس"],
            "خميس لتجاره": ["ترايباس", "فريتال", "سيتاكريتين", "اوترين", "شامبو سالي", "اوتيك", "ميوكسيديل", "كيزورال", "فاجينيل", "اورليستات", "ديكسلانس", "تونيقلوب", "اوراجين", "ايمبابيور", "ليفر ماكس", "او ميجا سمارت", "اكتامول", "ليوكائين", "بانثين E", "اليكازون M", "فريزجل", "فريبروكت", "مرتابين"],
            "رفا": ["سيزار 25", "جلبريل 4", "رفالين 50", "رفاداقزت", "رفابام 10", "اوريزول 500", "رفاجليب-ام", "رفابام 5", "اليزيت شراب", "رفابريل-اتش", "جلبريل 2", "جلبريل 3", "املوداك 10", "ريسدون 3", "كوميثر", "دومي شراب", "رفاسان 500", "دومي اقراص", "رفاجليب-ام 1000"],
            "رويال فارما": ["رويال فيت شراب", "رويال جيلي", "فيتامين سي رويال", "رويال ماس", "رويال بروتين"],
            "سابا فارما": ["سابا كريم", "سابا مرهم", "سابا شراب", "سابا اقراص", "سابا امبول"],
            "سافري": ["سافري جل", "سافري كريم", "سافري مرهم", "سافري شامبو"],
            "سايتك": ["سايتك كبسول", "سايتك شراب", "سايتك اقراص", "سايتك امبول"],
            "ساندوز": ["ساندوز اقراص", "ساندوز شراب", "ساندوز كريم", "ساندوز امبول"],
            "سيبا": ["سيبا كريم", "سيبا مرهم", "سيبا شراب", "سيبا اقراص"],
            "شايو": ["شايو كبسول", "شايو شراب", "شايو اقراص", "شايو امبول"],
            "صيدال": ["صيدال اقراص", "صيدال شراب", "صيدال كريم", "صيدال امبول"],
            "طازج": ["طازج كريم", "طازج مرهم", "طازج جل", "طازج شامبو"],
            "عبدالساتر": ["عبدالساتر كريم", "عبدالساتر مرهم", "عبدالساتر شراب", "عبدالساتر اقراص"],
            "فايزر": ["فايزر اقراص", "فايزر شراب", "فايزر كريم", "فايزر امبول"],
            "فارم": ["فارم كبسول", "فارم شراب", "فارم اقراص", "فارم امبول"],
            "فيكتور": ["فيكتور كريم", "فيكتور مرهم", "فيكتور شراب", "فيكتور اقراص"],
            "كندي": ["كندي كبسول", "كندي شراب", "كندي اقراص", "كندي امبول"],
            "نوفو نورديسك": ["نوفو نورديسك اقراص", "نوفو نورديسك شراب", "نوفو نورديسك كريم", "نوفو نورديسك امبول"],
            "هيليل": ["هيليل كريم", "هيليل مرهم", "هيليل شراب", "هيليل اقراص"]
        };

        let orderNotes = JSON.parse(localStorage.getItem('yousefi_notes')) || [];

        function init() {
            populateCompanyFilter();
            renderItems();
            updateStats();
            renderNotes();
        }

        function populateCompanyFilter() {
            const filter = document.getElementById('companyFilter');
            const companies = Object.keys(db).sort();
            companies.forEach(company => {
                const option = document.createElement('option');
                option.value = company;
                option.textContent = company;
                filter.appendChild(option);
            });
        }

        function renderItems() {
            const container = document.getElementById('productsContainer');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedCompany = document.getElementById('companyFilter').value;
            container.innerHTML = '';
            let totalItems = 0;

            Object.keys(db).forEach(company => {
                if (selectedCompany !== 'All' && selectedCompany !== company) return;
                let items = db[company];
                if (searchTerm) {
                    items = items.filter(item => 
                        item.toLowerCase().includes(searchTerm) || 
                        company.toLowerCase().includes(searchTerm)
                    );
                }
                if (items.length > 0) {
                    totalItems += items.length;
                    const section = document.createElement('div');
                    section.className = 'company-section';
                    
                    let itemsHTML = '';
                    items.forEach(item => {
                        itemsHTML += `
                            <div class="item-card">
                                <div class="item-info">
                                    <span class="dot"></span>
                                    ${item}
                                </div>
                                <div class="quantity-controls">
                                    <button class="qty-btn" onclick="decreaseQty('${company}', '${item}')">-</button>
                                    <input type="number" class="qty-input" id="qty-${company}-${item}" value="1" min="1" max="100">
                                    <button class="qty-btn" onclick="increaseQty('${company}', '${item}')">+</button>
                                    <button class="add-btn" onclick="addToNotes('${company}', '${item}')">اضافة</button>
                                </div>
                            </div>
                        `;
                    });
                    
                    section.innerHTML = `
                        <div class="company-title">
                            ${company}
                            <span class="count-badge">${items.length} منتج</span>
                        </div>
                        <div class="grid">
                            ${itemsHTML}
                        </div>
                    `;
                    
                    container.appendChild(section);
                }
            });

            document.getElementById('totalCount').textContent = totalItems;
        }

        function increaseQty(company, product) {
            const input = document.getElementById('qty-' + company + '-' + product);
            input.value = parseInt(input.value) + 1;
        }

        function decreaseQty(company, product) {
            const input = document.getElementById('qty-' + company + '-' + product);
            if (parseInt(input.value) > 1) {
                input.value = parseInt(input.value) - 1;
            }
        }

        function addToNotes(company, product) {
            const qtyInput = document.getElementById('qty-' + company + '-' + product);
            const quantity = parseInt(qtyInput.value);

            const existingIndex = orderNotes.findIndex(item => 
                item.product === product && item.company === company
            );

            if (existingIndex > -1) {
                orderNotes[existingIndex].quantity += quantity;
            } else {
                orderNotes.push({
                    company: company,
                    product: product,
                    quantity: quantity
                });
            }

            saveNotes();
            renderNotes();
            qtyInput.value = 1;
            alert('تم اضافة ' + quantity + ' من ' + product + ' الى المذكرة');
        }

        function removeFromNotes(index) {
            orderNotes.splice(index, 1);
            saveNotes();
            renderNotes();
        }

        function renderNotes() {
            const notesList = document.getElementById('notesList');
            const totalItems = document.getElementById('totalItems');

            if (orderNotes.length === 0) {
                notesList.innerHTML = '<div style="text-align: center; color: #666; padding: 30px; font-size: 16px;">لا توجد منتجات في المذكرة</div>';
                totalItems.textContent = '0';
                return;
            }

            let notesHTML = '';
            orderNotes.forEach((note, index) => {
                notesHTML += `
                    <div class="note-item">
                        <div class="note-info">
                            <div class="note-product">${note.product}</div>
                            <div class="note-company">${note.company}</div>
                        </div>
                        <div class="note-qty">
                            <span style="font-weight: bold; color: #1a365d;">الكمية: ${note.quantity}</span>
                            <button class="delete-btn" onclick="removeFromNotes(${index})">×</button>
                        </div>
                    </div>
                `;
            });

            notesList.innerHTML = notesHTML;
            totalItems.textContent = orderNotes.reduce((sum, note) => sum + note.quantity, 0);
        }

        function saveNotes() {
            localStorage.setItem('yousefi_notes', JSON.stringify(orderNotes));
        }

        function clearNotes() {
            if (confirm('هل تريد مسح جميع المنتجات من المذكرة؟')) {
                orderNotes = [];
                saveNotes();
                renderNotes();
            }
        }

        function sendOrder() {
            if (orderNotes.length === 0) {
                alert('المذكرة فارغة. اضافة بعض المنتجات اولا.');
                return;
            }

            let orderText = "طلبية جديدة - مخازن اليوسفي للادوية\n\n";
            orderText += "المنتجات المطلوبة:\n\n";

            orderNotes.forEach((note, index) => {
                orderText += (index + 1) + '. ' + note.product + '\n';
                orderText += '   الشركة: ' + note.company + '\n';
                orderText += '   الكمية: ' + note.quantity + '\n\n';
            });

            orderText += 'الاجمالي: ' + orderNotes.reduce((sum, note) => sum + note.quantity, 0) + ' صنف\n\n';
            orderText += new Date().toLocaleDateString('ar-EG');

            navigator.clipboard.writeText(orderText).then(() => {
                alert('تم نسخ الطلبية الى الحافظة\nيمكنك الآن ارسالها على الواتساب');
            });
        }

        function updateStats() {
            const totalCompanies = Object.keys(db).length;
            const totalProducts = Object.values(db).reduce((sum, products) => sum + products.length, 0);
            
            document.getElementById('statsInfo').innerHTML = 
                '<strong>احصائيات الكتالوج:</strong> ' + totalCompanies + '+ شركة | ' + totalProducts + '+ صنف';
        }

        function copyToWhatsapp() {
            let text = "كتالوج مخازن اليوسفي للادوية\n\n";
            
            Object.keys(db).forEach(company => {
                text += company + ':\n';
                db[company].forEach(item => {
                    text += '   • ' + item + '\n';
                });
                text += '\n';
            });
            
            navigator.clipboard.writeText(text).then(() => {
                alert('تم نسخ الكتالوج الى الحافظة\nيمكنك الآن مشاركته على الواتساب');
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            init();
            
            const now = new Date();
            try {
                document.getElementById('currentDate').innerText = now.toLocaleDateString('ar-EG');
            } catch(e) {
                document.getElementById('currentDate').innerText = now.toLocaleDateString();
            }
        });
    </script>
</body>
</html>
